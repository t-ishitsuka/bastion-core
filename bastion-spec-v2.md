# Bastion Core Specification v2

> ã€Œä¸€äººé–‹ç™ºä¼šç¤¾ã€ã‚’å®Ÿç¾ã™ã‚‹ Claude Code ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼

## æ¦‚è¦

Bastion ã¯ã€Claude Code ã®ãƒã‚¤ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ï¼ˆSkillsã€Agentsã€Hooksï¼‰ã‚’æ´»ç”¨ã—ãªãŒã‚‰ã€
å®Ÿè¨¼æ¸ˆã¿ã®ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ Go ã§å …ç‰¢ã«å®Ÿè£…ã—ãŸã‚·ã‚¹ãƒ†ãƒ ã§ã‚ã‚‹ã€‚

### è¨­è¨ˆæ€æƒ³

1. **Claude Code First** - ç‹¬è‡ªå®Ÿè£…ã‚ˆã‚Šå…¬å¼æ©Ÿèƒ½ã‚’å„ªå…ˆ
2. **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•** - ãƒãƒ¼ãƒªãƒ³ã‚°ã‚¼ãƒ­ï¼ˆfsnotify + inboxï¼‰
3. **è‡ªå·±å¼·åŒ–** - è©•ä¾¡â†’çŸ¥è­˜å…±æœ‰â†’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ã®å¾ªç’°
4. **å¤–éƒ¨æ³¨å…¥** - Specialist ã®å‹•çš„è¿½åŠ ãƒ»å‰Šé™¤

### å®Ÿç¾ã—ãŸã„ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œèªè¨¼æ©Ÿèƒ½ã‚’ä½œã£ã¦ã€
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Envoy                                                   â”‚
â”‚  1. ç›®çš„ã‚’å®šç¾©: ã€ŒJWTèªè¨¼ãŒå‹•ä½œã™ã‚‹ã€                     â”‚
â”‚  2. å®Œäº†æ¡ä»¶ã‚’å®šç¾©: ã€Œãƒ­ã‚°ã‚¤ãƒ³APIã€ã€ŒãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã€ã€Œãƒ†ã‚¹ãƒˆã€â”‚
â”‚  3. YAML ã«æ›¸ãè¾¼ã¿ â†’ Marshall ã«é€šçŸ¥                    â”‚
â”‚  4. å³åº§ã«ã‚¿ãƒ¼ãƒ³çµ‚äº†ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ¬¡ã®å…¥åŠ›ãŒå¯èƒ½ï¼‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Marshallï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰                             â”‚
â”‚  1. ã‚¿ã‚¹ã‚¯ã‚’åˆ†è§£: subtask_001, 002, 003                  â”‚
â”‚  2. ä¾å­˜é–¢ä¿‚ã‚’åˆ†æ: 001 â†’ 002 â†’ 003                      â”‚
â”‚  3. ä¸¦åˆ—å¯èƒ½ãªã‚¿ã‚¹ã‚¯ã‚’åŒæ™‚ dispatch                       â”‚
â”‚  4. å„ Specialist ã«å‰²å½“                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Spec 1  â”‚      â”‚ Spec 2  â”‚       â”‚ Spec 3  â”‚
â”‚ å‹å®šç¾©  â”‚      â”‚ ãƒŸãƒ‰ãƒ«  â”‚       â”‚ ãƒ†ã‚¹ãƒˆ  â”‚
â”‚ ã‚¦ã‚§ã‚¢  â”‚      â”‚         â”‚       â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                  â”‚                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Marshall                                                â”‚
â”‚  1. ãƒ¬ãƒãƒ¼ãƒˆå—ä¿¡ â†’ è©•ä¾¡å®Ÿè¡Œ                              â”‚
â”‚  2. çŸ¥è­˜æŠ½å‡º: ã€ŒJWT ã¯ jwt/v5 ã‚’ä½¿ã†ã€                   â”‚
â”‚  3. ã‚¹ã‚­ãƒ«å€™è£œç™ºè¦‹ â†’ Envoy ã«å ±å‘Š                        â”‚
â”‚  4. dashboard.md æ›´æ–°                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
Envoy ãŒ dashboard.md ã‚’èª­ã‚“ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å ±å‘Š
    â”‚
    â–¼
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œæ¬¡ã¯ã€‡ã€‡ã‚’ä½œã£ã¦ã€ï¼ˆç¶™ç¶šå¯èƒ½ï¼‰
```

**ãƒã‚¤ãƒ³ãƒˆ:**

1. **å³æ™‚å¿œç­”**: Envoy ã¯å§”è­²ã—ãŸã‚‰ã™ãæˆ»ã‚‹ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å¾…ãŸã›ãªã„
2. **ä¸¦åˆ—å‡¦ç†**: ä¾å­˜é–¢ä¿‚ãŒãªã‘ã‚Œã°è¤‡æ•° Specialist ãŒåŒæ™‚ã«ä½œæ¥­
3. **çŸ¥è­˜è“„ç©**: å®Ÿè¡Œã®ãŸã³ã«ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»æ•™è¨“ãŒè“„ç©ã•ã‚Œã‚‹
4. **ç¶™ç¶šçš„æ”¹å–„**: è“„ç©ã•ã‚ŒãŸçŸ¥è­˜ãŒæ¬¡ã®ã‚¿ã‚¹ã‚¯ã«è‡ªå‹•æ³¨å…¥ã•ã‚Œã‚‹

### å‚è€ƒ

- [multi-agent-shogun](https://github.com/yohey-w/multi-agent-shogun) - è¨­è¨ˆã®åŸºç›¤ã¨ãªã£ãŸãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            User                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Envoy                                  â”‚
â”‚  ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å”¯ä¸€ã®å¯¾è©±çª“å£                                      â”‚
â”‚  ãƒ»æˆ¦ç•¥æ±ºå®šã€ã‚¿ã‚¹ã‚¯åˆ†è§£                                           â”‚
â”‚  ãƒ»queue/envoy_to_marshall.yaml ã¸æŒ‡ä»¤æ›¸è¾¼                        â”‚
â”‚  ãƒ»dashboard.md ã‚’èª­ã‚“ã§å ±å‘Š                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ inbox_write
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Marshall                                â”‚
â”‚  ãƒ»ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ»Specialist å‰²å½“                                    â”‚
â”‚  ãƒ»ä¸¦åˆ—å®Ÿè¡Œç®¡ç†ï¼ˆtmux + git worktreeï¼‰                            â”‚
â”‚  ãƒ»å“è³ªè©•ä¾¡ãƒ»çŸ¥è­˜æŠ½å‡º                                             â”‚
â”‚  ãƒ»dashboard.md æ›´æ–°ï¼ˆå˜ä¸€æ›¸ãè¾¼ã¿è€…ï¼‰                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ inbox_write (ä¸¦åˆ—)
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Specialist 1 â”‚ â”‚ Specialist 2 â”‚ â”‚ Specialist N â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ report YAML + inbox_write
                          â–¼
                    Marshall ã¸å ±å‘Š
```

---

## é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«

### Mailbox System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Communication Flow                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Sender: Go ã® inbox.Write(target, message, type)           â”‚
â”‚  2. System: queue/inbox/<target>.yaml ã«è¿½è¨˜ï¼ˆsync.Mutexæ’ä»–ï¼‰   â”‚
â”‚  3. Watcher: fsnotify ãŒå¤‰æ›´æ¤œçŸ¥ â†’ tmux send-keys ã§nudge       â”‚
â”‚  4. Receiver: inbox YAML ã‚’èª­ã¿è¾¼ã¿å‡¦ç†                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹å¾´:**

- **ã‚¼ãƒ­ãƒãƒ¼ãƒªãƒ³ã‚°**: fsnotifyï¼ˆã‚«ãƒ¼ãƒãƒ«ãƒ¬ãƒ™ãƒ«ï¼‰ã§ API æ¶ˆè²»ã‚¼ãƒ­
- **æ’ä»–åˆ¶å¾¡**: Go ã® sync.Mutex ã§åŒæ™‚æ›¸ãè¾¼ã¿é˜²æ­¢
- **æ°¸ç¶šåŒ–**: YAML ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå†èµ·å‹•ã‚’è·¨ã„ã§çŠ¶æ…‹ä¿æŒ
- **nudge æ–¹å¼**: send-keys ã¯çŸ­ã„ wakeup ã®ã¿ã€æœ¬æ–‡ã¯ YAML ã‹ã‚‰èª­ã¿å–ã‚Š

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
queue/
â”œâ”€â”€ envoy_to_marshall.yaml      # Envoy â†’ Marshall æŒ‡ä»¤
â”œâ”€â”€ inbox/
â”‚   â”œâ”€â”€ marshall.yaml           # Marshall å®›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
â”‚   â”œâ”€â”€ specialist_1.yaml       # Specialist 1 å®›
â”‚   â””â”€â”€ ...
â”œâ”€â”€ tasks/
â”‚   â””â”€â”€ specialist_*.yaml       # ã‚¿ã‚¹ã‚¯è©³ç´°
â””â”€â”€ reports/
    â””â”€â”€ specialist_*_report.yaml
```

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```yaml
# inbox ã‚¨ãƒ³ãƒˆãƒª
- id: msg_001
  timestamp: "2026-02-08T10:00:00"
  from: envoy
  type: task_assigned # task_assigned | report_received | wake_up
  message: "æ–°è¦ã‚¿ã‚¹ã‚¯ã‚’å‰²ã‚Šå½“ã¦ãŸ"
  status: pending # pending | processed
```

---

## ãƒ­ãƒ¼ãƒ«å®šç¾©

### Envoy

**è²¬å‹™:**

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®æŒ‡ç¤ºå—ä»˜
- æˆ¦ç•¥ãƒ¬ãƒ™ãƒ«ã®æ„æ€æ±ºå®š
- **whatï¼ˆç›®çš„ï¼‰** ã¨ **acceptance_criteriaï¼ˆå®Œäº†æ¡ä»¶ï¼‰** ã®å®šç¾©
- Marshall ã¸ã®å³æ™‚å§”è­²ï¼ˆã‚¿ãƒ¼ãƒ³çµ‚äº†ï¼‰

**ç¦æ­¢äº‹é …:**

- è‡ªã‚‰ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã‚’è¡Œã†
- Specialist ã«ç›´æ¥æŒ‡ç¤ºã™ã‚‹
- ãƒãƒ¼ãƒªãƒ³ã‚°ãƒ«ãƒ¼ãƒ—

**æŒ‡ä»¤ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ:**

```yaml
- id: cmd_001
  timestamp: "2026-02-08T10:00:00"
  purpose: "èªè¨¼æ©Ÿèƒ½ãŒ JWT ãƒ™ãƒ¼ã‚¹ã§å‹•ä½œã™ã‚‹"
  acceptance_criteria:
    - "POST /auth/login ãŒ JWT ã‚’è¿”ã™"
    - "protected endpoint ãŒ JWT æ¤œè¨¼ã™ã‚‹"
    - "ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹"
  command: |
    JWTèªè¨¼ã‚’å®Ÿè£…
    - ãƒ­ã‚°ã‚¤ãƒ³ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä½œæˆ
    - ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢å®Ÿè£…
    - ãƒ†ã‚¹ãƒˆä½œæˆ
  project: api-server
  priority: high
  status: pending
```

### Marshall

**è²¬å‹™:**

- ã‚¿ã‚¹ã‚¯åˆ†è§£ï¼ˆ**how** ã®æ±ºå®šï¼‰
- Specialist ã¸ã®å‰²å½“ãƒ»ä¸¦åˆ—å®Ÿè¡Œç®¡ç†
- å“è³ªè©•ä¾¡ã®å®Ÿæ–½
- çŸ¥è­˜æŠ½å‡ºãƒ»å…±æœ‰
- dashboard.md ã®æ›´æ–°ï¼ˆå˜ä¸€æ›¸ãè¾¼ã¿è€…ï¼‰

**ç¦æ­¢äº‹é …:**

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç›´æ¥å ±å‘Šï¼ˆEnvoy çµŒç”±ï¼‰
- ãƒãƒ¼ãƒªãƒ³ã‚°ãƒ«ãƒ¼ãƒ—

**ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ:**

```yaml
# queue/tasks/specialist_1.yaml
task_id: subtask_001
parent_cmd: cmd_001
assigned_to: specialist_1
persona: "Senior Backend Engineer"
timestamp: "2026-02-08T10:05:00"
status: assigned # assigned | in_progress | done | blocked

objective: "JWTèªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®å®Ÿè£…"
deliverables:
  - "middleware/auth.go"
  - "middleware/auth_test.go"
context:
  - "æ—¢å­˜ã® middleware/logger.go ã‚’å‚è€ƒ"
blocks: []
blocked_by: []
```

### Specialist

**è²¬å‹™:**

- å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œ
- å°‚é–€ãƒšãƒ«ã‚½ãƒŠã§ã®é«˜å“è³ªãªæˆæœç‰©
- å®Œäº†å ±å‘Šï¼ˆMarshall å®›ï¼‰
- ã‚¹ã‚­ãƒ«å€™è£œã®å ±å‘Š

**ç¦æ­¢äº‹é …:**

- Envoy ã«ç›´æ¥å ±å‘Š
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç›´æ¥é€£çµ¡
- å‰²ã‚Šå½“ã¦å¤–ã®ä½œæ¥­
- ä»– Specialist ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿æ›¸ã

**ãƒ¬ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ:**

```yaml
# queue/reports/specialist_1_report.yaml
worker_id: specialist_1
task_id: subtask_001
parent_cmd: cmd_001
timestamp: "2026-02-08T11:00:00"
status: done # done | failed | blocked

result:
  summary: "JWTèªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢å®Ÿè£…å®Œäº†"
  files_modified:
    - "middleware/auth.go"
    - "middleware/auth_test.go"
  test_results: "4/4 passed"
  notes: "ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã¯æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã§å®Ÿè£…æ¨å¥¨"

purpose_validation:
  meets_criteria: true
  gaps: []

skill_candidate:
  found: true
  name: "jwt-middleware"
  description: "Go JWTèªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®é››å½¢ç”Ÿæˆ"
  reason: "èªè¨¼å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒç¹°ã‚Šè¿”ã—ç™ºç”Ÿ"
```

---

## ä¸¦åˆ—å®Ÿè¡Œ

### tmux + git worktree

```
Session: bastion
â”œâ”€â”€ Window 0: envoy (main branch)
â”œâ”€â”€ Window 1: marshall (main branch)
â””â”€â”€ Window 2: specialists
    â”œâ”€â”€ Pane 0.0: marshall control
    â”œâ”€â”€ Pane 0.1: specialist_1 (worktree: .worktrees/sp1)
    â”œâ”€â”€ Pane 0.2: specialist_2 (worktree: .worktrees/sp2)
    â””â”€â”€ ...
```

**worktree æˆ¦ç•¥:**

- å„ Specialist ã¯ç‹¬ç«‹ã—ãŸ worktree ã§ä½œæ¥­
- ãƒ•ã‚¡ã‚¤ãƒ«ç«¶åˆã‚’ç‰©ç†çš„ã«å›é¿
- å®Œäº†å¾Œã€Marshall ãŒãƒãƒ¼ã‚¸èª¿æ•´

### ä¾å­˜é–¢ä¿‚ç®¡ç†

```yaml
# ã‚¿ã‚¹ã‚¯ YAML å†…
blocks: ["subtask_003"] # ã“ã®ã‚¿ã‚¹ã‚¯å®Œäº†ã¾ã§ 003 ã¯é–‹å§‹ä¸å¯
blocked_by: ["subtask_001"] # 001 ã®å®Œäº†ã‚’å¾…ã¤
```

Marshall ãŒä¾å­˜ã‚°ãƒ©ãƒ•ã‚’ç®¡ç†ã—ã€ä¸¦åˆ—å¯èƒ½ãªã‚¿ã‚¹ã‚¯ã‚’åŒæ™‚ dispatchã€‚

---

## è‡ªå·±å¼·åŒ–ã‚·ã‚¹ãƒ†ãƒ 

### 1. è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 

**å®Œäº†æ™‚è©•ä¾¡ï¼ˆMarshall å®Ÿè¡Œï¼‰:**

```yaml
evaluation:
  task_id: subtask_001
  evaluator: marshall
  timestamp: "2026-02-08T11:30:00"

  scores:
    correctness: 5 # 1-5: è¦ä»¶å……è¶³åº¦
    code_quality: 4 # 1-5: ã‚³ãƒ¼ãƒ‰å“è³ª
    efficiency: 4 # 1-5: å®Ÿè¡ŒåŠ¹ç‡

  issues_found: []

  knowledge_extracted:
    - type: pattern
      content: "Go JWTå®Ÿè£…ã§ã¯ github.com/golang-jwt/jwt/v5 ã‚’ä½¿ç”¨"
    - type: lesson
      content: "ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãƒ†ã‚¹ãƒˆã¯ httptest.NewRecorder ã§çµ±ä¸€"
```

**è©•ä¾¡åŸºæº–ï¼ˆBloom's Taxonomy å¿œç”¨ï¼‰:**

| ãƒ¬ãƒ™ãƒ« | å†…å®¹       | è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ         |
| ------ | ---------- | -------------------- |
| L1-L2  | è¨˜æ†¶ãƒ»ç†è§£ | ä»•æ§˜é€šã‚Šã‹           |
| L3-L4  | å¿œç”¨ãƒ»åˆ†æ | æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã®æ•´åˆæ€§ |
| L5-L6  | è©•ä¾¡ãƒ»å‰µé€  | æ”¹å–„ææ¡ˆã®è³ª         |

### 2. çŸ¥è­˜å…±æœ‰

**æŠ½å‡ºã•ã‚ŒãŸçŸ¥è­˜ã®ä¿å­˜:**

```
knowledge/
â”œâ”€â”€ patterns/
â”‚   â”œâ”€â”€ go-jwt-middleware.md
â”‚   â””â”€â”€ react-form-validation.md
â”œâ”€â”€ lessons/
â”‚   â”œâ”€â”€ 2026-02-08-auth-implementation.md
â”‚   â””â”€â”€ ...
â””â”€â”€ index.yaml  # æ¤œç´¢ç”¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
```

**Memory MCP é€£æº:**

- é‡è¦ãªçŸ¥è­˜ã¯ Memory MCP ã«ã‚‚ä¿å­˜
- ã‚»ãƒƒã‚·ãƒ§ãƒ³è·¨ãã§å‚ç…§å¯èƒ½
- `read_graph` ã§æ—¢å­˜çŸ¥è­˜ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ä½œæ¥­é–‹å§‹

### 3. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„

**ã‚¹ã‚­ãƒ«å€™è£œã®æ˜‡æ ¼ãƒ•ãƒ­ãƒ¼:**

```
Specialistå ±å‘Š â†’ Marshallåé›† â†’ Envoyæ‰¿èª â†’ .claude/skills/ ã«ç™»éŒ²
                     â†“
              knowledge/ ã«è¨˜éŒ²
```

**Specialist æŒ‡ç¤ºã®æ”¹å–„:**

```yaml
# çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã®è‡ªå‹•æ³¨å…¥
context_injection:
  patterns:
    - "go-jwt-middleware" # é–¢é€£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è‡ªå‹•å‚ç…§
  lessons:
    - "2026-02-08-auth-implementation"
```

---

## å¤–éƒ¨ Specialist æ³¨å…¥

### Specialist å®šç¾©

```yaml
# .claude/agents/specialist-security.yaml
name: security-auditor
description: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»å°‚é–€"
persona: "Senior Security Engineer"
capabilities:
  - "OWASP Top 10 ãƒã‚§ãƒƒã‚¯"
  - "ä¾å­˜é–¢ä¿‚è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³"
  - "èªè¨¼ãƒ»èªå¯ãƒ¬ãƒ“ãƒ¥ãƒ¼"
trigger_patterns:
  - "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£"
  - "è„†å¼±æ€§"
  - "ç›£æŸ»"
```

### å‹•çš„ãƒ­ãƒ¼ãƒ‰

```go
// Goå´ã§ã®å‹•çš„ãƒ­ãƒ¼ãƒ‰
type SpecialistConfig struct {
    Name         string   `yaml:"name"`
    Description  string   `yaml:"description"`
    Persona      string   `yaml:"persona"`
    Capabilities []string `yaml:"capabilities"`
    Triggers     []string `yaml:"trigger_patterns"`
}

func LoadSpecialists(dir string) ([]SpecialistConfig, error) {
    // .claude/agents/*.yaml ã‚’ã‚¹ã‚­ãƒ£ãƒ³
}
```

### æ³¨å…¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°

- **èµ·å‹•æ™‚**: `.claude/agents/` ã‚’ã‚¹ã‚­ãƒ£ãƒ³
- **å®Ÿè¡Œæ™‚**: `bastion specialist add <path>` ã‚³ãƒãƒ³ãƒ‰
- **ã‚¿ã‚¹ã‚¯æ™‚**: Marshall ãŒã‚¿ã‚¹ã‚¯å†…å®¹ã‹ã‚‰ trigger_patterns ãƒãƒƒãƒ

---

## ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

### dashboard.mdï¼ˆMarshall æ›´æ–°ï¼‰

```markdown
# Bastion Dashboard

## ç¾åœ¨ã®çŠ¶æ…‹

- **ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒãƒ³ãƒ‰**: cmd_001 (JWTèªè¨¼å®Ÿè£…)
- **é€²æ—**: 2/4 subtasks å®Œäº†

## Specialist çŠ¶æ³

| ID           | çŠ¶æ…‹      | ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯ | é€²æ— |
| ------------ | --------- | ------------ | ---- |
| specialist_1 | ğŸŸ¢ ä½œæ¥­ä¸­ | subtask_003  | 70%  |
| specialist_2 | âšª å¾…æ©Ÿ   | -            | -    |
| specialist_3 | ğŸŸ¢ ä½œæ¥­ä¸­ | subtask_004  | 30%  |

## æœ€è¿‘ã®å®Œäº†

- âœ… subtask_001: JWT ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢å®Ÿè£… (specialist_1)
- âœ… subtask_002: ãƒ†ã‚¹ãƒˆä½œæˆ (specialist_2)

## çŸ¥è­˜æŠ½å‡º

- ğŸ“š ãƒ‘ã‚¿ãƒ¼ãƒ³: go-jwt-middleware
- ğŸ’¡ æ•™è¨“: ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãƒ†ã‚¹ãƒˆã¯ httptest çµ±ä¸€

## æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

- subtask_003, 004 å®Œäº†å¾…ã¡
- å®Œäº†å¾Œã€çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```

---

## Go å®Ÿè£…æ§‹é€ 

ã™ã¹ã¦ Go ã§å®Ÿè£…ã€‚shell script ã¯ä½¿ç”¨ã—ãªã„ã€‚

```
bastion/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ bastion/
â”‚       â””â”€â”€ main.go           # CLI ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ orchestrator/
â”‚   â”‚   â”œâ”€â”€ orchestrator.go   # ãƒ¡ã‚¤ãƒ³åˆ¶å¾¡
â”‚   â”‚   â”œâ”€â”€ envoy.go          # Envoy ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ marshall.go       # Marshall ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ specialist.go     # Specialist ç®¡ç†
â”‚   â”œâ”€â”€ communication/
â”‚   â”‚   â”œâ”€â”€ inbox.go          # inbox èª­ã¿æ›¸ãï¼ˆGoå®Ÿè£…ï¼‰
â”‚   â”‚   â”œâ”€â”€ watcher.go        # fsnotify ã§ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–
â”‚   â”‚   â””â”€â”€ yaml.go           # YAMLæ“ä½œ
â”‚   â”œâ”€â”€ evaluation/
â”‚   â”‚   â”œâ”€â”€ evaluator.go      # è©•ä¾¡ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ knowledge.go      # çŸ¥è­˜æŠ½å‡º
â”‚   â”œâ”€â”€ parallel/
â”‚   â”‚   â”œâ”€â”€ tmux.go           # tmux æ“ä½œï¼ˆexec.Commandï¼‰
â”‚   â”‚   â””â”€â”€ worktree.go       # git worktree ç®¡ç†
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ loader.go         # è¨­å®šèª­ã¿è¾¼ã¿
â””â”€â”€ queue/                    # é€šä¿¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆå®Ÿè¡Œæ™‚ç”Ÿæˆï¼‰
```

**Go ã§å®Ÿè£…ã™ã‚‹ç†ç”±:**

- ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è„†å¼±æ€§ï¼ˆå¼•æ•°ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰ã‚’å›é¿
- ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œï¼ˆmacOS / Linuxï¼‰
- å‹å®‰å…¨ãª YAML æ“ä½œ
- ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§

### CLI ã‚³ãƒãƒ³ãƒ‰

```bash
# èµ·å‹•
bastion start                    # tmux ã‚»ãƒƒã‚·ãƒ§ãƒ³èµ·å‹•
bastion start --specialists 4    # Specialist æ•°æŒ‡å®š

# ç®¡ç†
bastion status                   # ç¾åœ¨çŠ¶æ…‹è¡¨ç¤º
bastion specialist add <path>    # Specialist è¿½åŠ 
bastion specialist list          # ä¸€è¦§è¡¨ç¤º

# é–‹ç™º
bastion dev                      # é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ­ã‚°è©³ç´°ï¼‰
```

---

## Claude Code é€£æº

### Skillsï¼ˆ.claude/skills/ï¼‰

```markdown
## <!-- .claude/skills/SKILL-jwt-auth.md -->

name: jwt-auth
description: Go JWTèªè¨¼ã®å®Ÿè£…

---

# JWTèªè¨¼å®Ÿè£…ã‚¹ã‚­ãƒ«

## ä½¿ç”¨æ–¹æ³•

`/jwt-auth <ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ‘ã‚¹>`

## å®Ÿè¡Œå†…å®¹

1. middleware/auth.go ç”Ÿæˆ
2. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
3. æ—¢å­˜ãƒ«ãƒ¼ã‚¿ãƒ¼ã¸ã®çµ„ã¿è¾¼ã¿ææ¡ˆ
```

### Hooksï¼ˆ.claude/hooks/ï¼‰

```json
{
  "hooks": {
    "post-commit": {
      "command": "bastion notify commit",
      "description": "ã‚³ãƒŸãƒƒãƒˆå¾Œã« Marshall ã¸é€šçŸ¥"
    }
  }
}
```

### Settingsï¼ˆ.claude/settings.jsonï¼‰

```json
{
  "agents": {
    "bastion-envoy": {
      "instructions": "instructions/envoy.md"
    },
    "bastion-marshall": {
      "instructions": "instructions/marshall.md"
    }
  }
}
```

---

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 0: ç’°å¢ƒæ¤œè¨¼ [å®Œäº†]

- [x] `bastion doctor` ã‚³ãƒãƒ³ãƒ‰ï¼ˆå¿…é ˆ CLI ã®å­˜åœ¨ç¢ºèªï¼‰
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®ç¢ºç«‹ï¼ˆcmd/bastion, internal/ï¼‰

### Phase 1: åŸºç›¤ï¼ˆMVPï¼‰

- [ ] Go ã§é€šä¿¡å±¤å®Ÿè£…ï¼ˆinbox / watcherï¼‰
- [ ] tmux ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- [ ] Envoy â†’ Marshall â†’ Specialist é€šä¿¡
- [ ] åŸºæœ¬ CLIï¼ˆstart, statusï¼‰

### Phase 2: ä¸¦åˆ—å®Ÿè¡Œ

- [ ] git worktree ç®¡ç†
- [ ] ä¾å­˜é–¢ä¿‚è§£æ±ºï¼ˆblocks / blocked_byï¼‰
- [ ] è¤‡æ•° Specialist åŒæ™‚å®Ÿè¡Œ

### Phase 3: è‡ªå·±å¼·åŒ–

- [ ] è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
- [ ] çŸ¥è­˜æŠ½å‡ºãƒ»ä¿å­˜
- [ ] ã‚¹ã‚­ãƒ«å€™è£œåé›†

### Phase 4: æ‹¡å¼µ

- [ ] å¤–éƒ¨ Specialist æ³¨å…¥
- [ ] Memory MCP é€£æº

---

## å°†æ¥å®Ÿè£…ï¼ˆFutureï¼‰

ä»¥ä¸‹ã¯ MVP å¾Œã«å®Ÿè£…äºˆå®šã®æ©Ÿèƒ½ã€‚

### è¦‹ç©ã‚‚ã‚Šæ©Ÿèƒ½

ã‚¿ã‚¹ã‚¯å®Ÿè¡Œå‰ã«ã‚³ã‚¹ãƒˆãƒ»æ™‚é–“ã‚’äºˆæ¸¬ã—ã€å®Ÿç¸¾ã¨æ¯”è¼ƒã—ã¦ç²¾åº¦ã‚’æ”¹å–„ã€‚

```yaml
estimate:
  time: 45m
  tokens: 25000
  complexity: L # S/M/L/XL
  confidence: 0.8
  cost:
    model: sonnet
    estimated_cost: 0.135 # USD

# å®Œäº†å¾Œ
actual:
  time: 38m
  tokens: 21500
  cost: 0.116
variance:
  time: -16%
  cost: -14%
```

Marshall ãŒè¦‹ç©ã‚‚ã‚Šç²¾åº¦ã‚’è¿½è·¡ã—ã€è£œæ­£ä¿‚æ•°ã‚’å­¦ç¿’ã€‚

### TUI ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

Bubble Tea ãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bastion Dashboard                              [F1-F6] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Active: cmd_001 (JWTèªè¨¼)           Progress: 2/4     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Specialist 1: ğŸŸ¢ subtask_003 (70%)                     â”‚
â”‚ Specialist 2: âšª idle                                  â”‚
â”‚ Specialist 3: ğŸŸ¢ subtask_004 (30%)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Recent: âœ… subtask_001, âœ… subtask_002                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### GitHub é€£æº

Issue/PR ã¨ã®è‡ªå‹•é€£æºã€‚

```yaml
github:
  auto_issue: true # ã‚¿ã‚¹ã‚¯ã‹ã‚‰ Issue è‡ªå‹•ä½œæˆ
  auto_pr: true # å®Œäº†æ™‚ã« PR è‡ªå‹•ä½œæˆ
  label_sync: true # ãƒ©ãƒ™ãƒ«åŒæœŸ
```

- `bastion dispatch --issue 42` ã§ Issue ã‹ã‚‰ã‚¿ã‚¹ã‚¯åŒ–
- Specialist å®Œäº†æ™‚ã« PR ä½œæˆ

### ã‚³ãƒŸãƒƒãƒˆæˆ¦ç•¥

ç´°ã‹ã„ã‚³ãƒŸãƒƒãƒˆãƒãƒªã‚·ãƒ¼ã®åˆ¶å¾¡ã€‚

```yaml
commit_policy:
  granularity: step # task | step | manual
  wip_commits: true # WIP ã‚³ãƒŸãƒƒãƒˆã‚’è¨±å¯
  squash_on_complete: false
  message_format: "conventional" # conventional | simple
```

### ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

Specialist å¤±æ•—æ™‚ã®è‡ªå‹•ãƒªã‚«ãƒãƒªã€‚

```yaml
fallback:
  max_retries: 2
  retry_with_different_approach: true
  escalate_to_human: true # æœ€çµ‚çš„ã«äººé–“ã«é€šçŸ¥
```

### äººé–“ä»‹å…¥ãƒã‚¤ãƒ³ãƒˆ

é‡è¦ãªæ±ºå®šã§äººé–“ã®æ‰¿èªã‚’æ±‚ã‚ã‚‹ã€‚

```yaml
intervention:
  require_approval:
    - destructive_changes # ç ´å£Šçš„å¤‰æ›´
    - new_dependencies # æ–°è¦ä¾å­˜è¿½åŠ 
    - security_changes # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£
  notification:
    - slack
    - email
```

---

## è¨­è¨ˆåŸå‰‡

### æ¡ç”¨ã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³

1. **å³æ™‚å§”è­²** - Envoy ã¯æŒ‡ç¤ºã‚’æ›¸ã„ãŸã‚‰å³åº§ã«ã‚¿ãƒ¼ãƒ³çµ‚äº†
2. **å˜ä¸€æ›¸ãè¾¼ã¿è€…** - dashboard.md ã¯ Marshall ã®ã¿æ›´æ–°
3. **nudge æ–¹å¼** - send-keys ã¯çŸ­ã„ wakeup ã®ã¿
4. **YAML æ¨©å¨** - YAML ãŒæ­£ã€dashboard ã¯å‰¯æ¬¡æƒ…å ±

### Bastion ç‹¬è‡ª

1. **Go å …ç‰¢æ€§** - ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è„†å¼±æ€§ã‚’ Go ã§è§£æ¶ˆ
2. **è‡ªå·±å¼·åŒ–** - è©•ä¾¡â†’çŸ¥è­˜â†’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ã®å¾ªç’°
3. **å¤–éƒ¨æ³¨å…¥** - Specialist ã®å‹•çš„è¿½åŠ 
4. **Claude Code çµ±åˆ** - Skills/Hooks/Agents ã¨ã®é€£æº
